<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deployment Guide - Market Screener Documentation</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/10.6.1/mermaid.min.js"></script>
  </head>
  <body>
    <div class="documentation-container">
      <!-- Left Sidebar - Table of Contents -->
      <div class="sidebar">
        <div class="sidebar-header">
          <h1>🚀 Market Screener</h1>
          <p>Technical Documentation</p>
        </div>

        <nav class="toc">
          <div class="toc-section">
            <a href="index.html" class="toc-main">🏠 Home</a>
          </div>

          <div class="toc-section">
            <a href="executive-summary.html" class="toc-main"
              >📋 Executive Summary</a
            >
            <a href="executive-summary.html#project-overview" class="toc-sub"
              >Project Overview</a
            >
            <a href="executive-summary.html#key-features" class="toc-sub"
              >Key Features</a
            >
          </div>

          <div class="toc-section">
            <a href="technology-stack.html" class="toc-main"
              >💻 Technology Stack</a
            >
            <a href="technology-stack.html#backend-tech" class="toc-sub"
              >Backend Technologies</a
            >
            <a href="technology-stack.html#frontend-tech" class="toc-sub"
              >Frontend Technologies</a
            >
            <a href="technology-stack.html#why-typescript" class="toc-sub"
              >Why TypeScript</a
            >
          </div>

          <div class="toc-section">
            <a href="architecture.html" class="toc-main"
              >🏗️ System Architecture</a
            >
            <a href="architecture.html#high-level-arch" class="toc-sub"
              >High-Level Architecture</a
            >
            <a href="architecture.html#data-flow-arch" class="toc-sub"
              >Data Flow Architecture</a
            >
          </div>

          <div class="toc-section">
            <a href="backend-docs.html" class="toc-main"
              >⚙️ Backend Documentation</a
            >
            <a href="backend-docs.html#root-files" class="toc-sub"
              >Root Files</a
            >
            <a href="backend-docs.html#configuration" class="toc-sub"
              >Configuration</a
            >
            <a href="backend-docs.html#controllers" class="toc-sub"
              >Controllers</a
            >
            <a href="backend-docs.html#middleware" class="toc-sub"
              >Middleware</a
            >
            <a href="backend-docs.html#models" class="toc-sub">Models</a>
            <a href="backend-docs.html#routes" class="toc-sub">Routes</a>
            <a href="backend-docs.html#services" class="toc-sub">Services</a>
            <a href="backend-docs.html#alerts" class="toc-sub">Alerts</a>
            <a href="backend-docs.html#jobs" class="toc-sub">Jobs</a>
            <a href="backend-docs.html#utils" class="toc-sub">Utils</a>
          </div>

          <div class="toc-section">
            <a href="frontend-docs.html" class="toc-main"
              >🎨 Frontend Documentation</a
            >
            <a href="frontend-docs.html#pages" class="toc-sub">Pages</a>
            <a href="frontend-docs.html#components" class="toc-sub"
              >Components</a
            >
            <a href="frontend-docs.html#context" class="toc-sub">Context</a>
            <a href="frontend-docs.html#hooks" class="toc-sub">Hooks</a>
          </div>

          <div class="toc-section">
            <a href="api-docs.html" class="toc-main">🔌 API Documentation</a>
            <a href="api-docs.html#auth-endpoints" class="toc-sub"
              >Authentication</a
            >
            <a href="api-docs.html#user-endpoints" class="toc-sub"
              >User Management</a
            >
            <a href="api-docs.html#alert-endpoints" class="toc-sub"
              >Alert System</a
            >
            <a href="api-docs.html#decision-endpoints" class="toc-sub"
              >Decisions</a
            >
          </div>

          <div class="toc-section">
            <a href="database-schema.html" class="toc-main"
              >🗄️ Database Schema</a
            >
            <a href="database-schema.html#mongodb-collections" class="toc-sub"
              >MongoDB Collections</a
            >
            <a href="database-schema.html#redis-structures" class="toc-sub"
              >Redis Structures</a
            >
          </div>

          <div class="toc-section">
            <a href="configuration.html" class="toc-main">⚙️ Configuration</a>
            <a href="configuration.html#env-variables" class="toc-sub"
              >Environment Variables</a
            >
            <a href="configuration.html#config-categories" class="toc-sub"
              >Config Categories</a
            >
          </div>

          <div class="toc-section">
            <a href="deployment.html" class="toc-main active"
              >🚀 Deployment Guide</a
            >
            <a href="#prerequisites" class="toc-sub">Prerequisites</a>
            <a href="#installation" class="toc-sub">Installation</a>
            <a href="#production" class="toc-sub">Production</a>
          </div>

          <div class="toc-section">
            <a href="customization.html" class="toc-main">🔧 Customization</a>
            <a href="customization.html#new-alerts" class="toc-sub"
              >New Alert Types</a
            >
            <a href="customization.html#trading-strategies" class="toc-sub"
              >Trading Strategies</a
            >
            <a href="customization.html#ui-extension" class="toc-sub"
              >UI Extension</a
            >
          </div>
        </nav>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <div class="header">
          <h1>🚀 Deployment Guide</h1>
          <p>Setup & Deployment Instructions</p>
        </div>

        <div class="content">
          <!-- Deployment Guide -->
          <div class="section" id="deployment">
            <h2>🚀 9. Deployment Guide</h2>

            <div class="overview-grid">
              <div class="overview-card">
                <h3>🔧 Development Setup</h3>
                <p>Local development environment with hot reloading</p>
              </div>

              <div class="overview-card">
                <h3>🏭 Production Deployment</h3>
                <p>Scalable production deployment with monitoring</p>
              </div>

              <div class="overview-card">
                <h3>📊 Monitoring & Logging</h3>
                <p>Application monitoring and error tracking</p>
              </div>
            </div>

            <h3 id="prerequisites">Prerequisites</h3>
            <div class="feature-grid">
              <div class="feature-card">
                <h4>💻 System Requirements</h4>
                <ul>
                  <li>
                    <strong>Node.js:</strong> Version 18+ (LTS recommended)
                  </li>
                  <li><strong>MongoDB:</strong> Version 5+</li>
                  <li><strong>Redis:</strong> Version 6+</li>
                  <li><strong>Memory:</strong> Minimum 2GB RAM</li>
                  <li><strong>Storage:</strong> 10GB+ available space</li>
                </ul>
              </div>

              <div class="feature-card">
                <h4>🔑 API Keys Required</h4>
                <ul>
                  <li><strong>Twelve Data API:</strong> Market data access</li>
                  <li>
                    <strong>Alpaca Trading API:</strong> Trading execution
                  </li>
                  <li><strong>VAPID Keys:</strong> Push notifications</li>
                  <li>
                    <strong>SMTP Credentials:</strong> Email notifications
                  </li>
                </ul>
              </div>

              <div class="feature-card">
                <h4>🌐 Network Requirements</h4>
                <ul>
                  <li>
                    <strong>HTTPS:</strong> SSL certificate for production
                  </li>
                  <li><strong>Domain:</strong> Registered domain name</li>
                  <li><strong>Firewall:</strong> Open ports 80, 443, 3000</li>
                  <li><strong>CDN:</strong> Optional for static assets</li>
                </ul>
              </div>
            </div>

            <h3 id="installation">Installation Steps</h3>

            <div class="api-endpoint">
              <h4>1. Clone Repository</h4>
              <div class="code-block">
                # Clone the repository git clone
                https://github.com/your-username/realtime-market-screener.git cd
                realtime-market-screener # Checkout the latest release git
                checkout main
              </div>
            </div>

            <div class="api-endpoint">
              <h4>2. Backend Setup</h4>
              <div class="code-block">
                # Navigate to backend directory cd screener-backend # Install
                dependencies npm install # Create environment file cp
                .env.example .env # Edit environment variables nano .env
              </div>

              <div class="highlight-box">
                <h4>Required Environment Variables</h4>
                <div class="code-block">
                  # Database Configuration
                  MONGO_URI=mongodb://localhost:27017/screener
                  REDIS_URL=redis://localhost:6379 # Application Settings
                  NODE_ENV=development PORT=3000
                  JWT_SECRET=your-super-secret-jwt-key # External APIs
                  TWELVEDATA_API_KEY=your-twelve-data-api-key
                  ALPACA_API_KEY=your-alpaca-api-key
                  ALPACA_SECRET_KEY=your-alpaca-secret-key # Push Notifications
                  VAPID_PUBLIC_KEY=your-vapid-public-key
                  VAPID_PRIVATE_KEY=your-vapid-private-key # Email Configuration
                  EMAIL_HOST=smtp.gmail.com EMAIL_USER=your-email@gmail.com
                  EMAIL_PASS=your-app-password
                </div>
              </div>
            </div>

            <div class="api-endpoint">
              <h4>3. Frontend Setup</h4>
              <div class="code-block">
                # Navigate to frontend directory cd ../screener-frontend #
                Install dependencies npm install # Create environment file cp
                .env.example .env # Edit environment variables nano .env
              </div>

              <div class="highlight-box">
                <h4>Frontend Environment Variables</h4>
                <div class="code-block">
                  # API Configuration VITE_API_URL=http://localhost:3000/api
                  VITE_SSE_URL=http://localhost:3000/sse # Push Notifications
                  VITE_VAPID_PUBLIC_KEY=your-vapid-public-key # Build
                  Configuration VITE_APP_NAME=Market Screener
                  VITE_APP_VERSION=1.0.0
                </div>
              </div>
            </div>

            <div class="api-endpoint">
              <h4>4. Database Setup</h4>
              <div class="code-block">
                # Start MongoDB (if not running) sudo systemctl start mongod #
                Start Redis (if not running) sudo systemctl start redis # Verify
                connections mongo --eval "db.runCommand('ping')" redis-cli ping
              </div>
            </div>

            <div class="api-endpoint">
              <h4>5. Build and Start</h4>
              <div class="code-block">
                # Backend build and start cd screener-backend npm run build npm
                start # Frontend development server (new terminal) cd
                screener-frontend npm run dev
              </div>
            </div>

            <h3>🔧 Development Commands</h3>
            <div class="schema-box">
              <h4>Backend Commands</h4>
              <table class="tech-table">
                <thead>
                  <tr>
                    <th>Command</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><code>npm run dev</code></td>
                    <td>Start development server with hot reload</td>
                  </tr>
                  <tr>
                    <td><code>npm run build</code></td>
                    <td>Build TypeScript to JavaScript</td>
                  </tr>
                  <tr>
                    <td><code>npm start</code></td>
                    <td>Start production server</td>
                  </tr>
                  <tr>
                    <td><code>npm test</code></td>
                    <td>Run test suite</td>
                  </tr>
                  <tr>
                    <td><code>npm run lint</code></td>
                    <td>Run ESLint for code quality</td>
                  </tr>
                </tbody>
              </table>

              <h4>Frontend Commands</h4>
              <table class="tech-table">
                <thead>
                  <tr>
                    <th>Command</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><code>npm run dev</code></td>
                    <td>Start Vite development server</td>
                  </tr>
                  <tr>
                    <td><code>npm run build</code></td>
                    <td>Build for production</td>
                  </tr>
                  <tr>
                    <td><code>npm run preview</code></td>
                    <td>Preview production build</td>
                  </tr>
                  <tr>
                    <td><code>npm run lint</code></td>
                    <td>Run ESLint</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <h3 id="production">Production Deployment</h3>

            <div class="api-endpoint">
              <h4>1. Server Preparation</h4>
              <div class="code-block">
                # Update system packages sudo apt update && sudo apt upgrade -y
                # Install Node.js 18+ curl -fsSL
                https://deb.nodesource.com/setup_18.x | sudo -E bash - sudo
                apt-get install -y nodejs # Install MongoDB wget -qO -
                https://www.mongodb.org/static/pgp/server-5.0.asc | sudo apt-key
                add - echo "deb [ arch=amd64,arm64 ]
                https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/5.0
                multiverse" | sudo tee
                /etc/apt/sources.list.d/mongodb-org-5.0.list sudo apt-get update
                sudo apt-get install -y mongodb-org # Install Redis sudo apt-get
                install redis-server # Install Nginx sudo apt-get install nginx
                # Install PM2 for process management sudo npm install -g pm2
              </div>
            </div>

            <div class="api-endpoint">
              <h4>2. Application Deployment</h4>
              <div class="code-block">
                # Clone repository on server git clone
                https://github.com/your-username/realtime-market-screener.git cd
                realtime-market-screener # Backend setup cd screener-backend npm
                install npm run build # Create production environment file cp
                .env.example .env.production # Edit .env.production with
                production values # Frontend build cd ../screener-frontend npm
                install npm run build
              </div>
            </div>

            <div class="api-endpoint">
              <h4>3. PM2 Configuration</h4>
              <div class="code-block">
                # Create PM2 ecosystem file cat > ecosystem.config.js << EOF
                module.exports = { apps: [{ name: 'market-screener-backend',
                script: './dist/app.js', instances: 'max', exec_mode: 'cluster',
                env: { NODE_ENV: 'production', PORT: 3000 }, env_file:
                '.env.production', error_file: './logs/err.log', out_file:
                './logs/out.log', log_file: './logs/combined.log', time: true }]
                } EOF # Start application with PM2 pm2 start ecosystem.config.js
                pm2 save pm2 startup
              </div>
            </div>

            <div class="api-endpoint">
              <h4>4. Nginx Configuration</h4>
              <div class="code-block">
                # Create Nginx configuration sudo nano
                /etc/nginx/sites-available/market-screener server { listen 80;
                server_name your-domain.com; return 301
                https://$server_name$request_uri; } server { listen 443 ssl
                http2; server_name your-domain.com; ssl_certificate
                /path/to/your/certificate.crt; ssl_certificate_key
                /path/to/your/private.key; # Frontend static files location / {
                root /path/to/realtime-market-screener/screener-frontend/dist;
                try_files $uri $uri/ /index.html; } # Backend API location /api
                { proxy_pass http://localhost:3000; proxy_http_version 1.1;
                proxy_set_header Upgrade $http_upgrade; proxy_set_header
                Connection 'upgrade'; proxy_set_header Host $host;
                proxy_set_header X-Real-IP $remote_addr; proxy_set_header
                X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header
                X-Forwarded-Proto $scheme; proxy_cache_bypass $http_upgrade; } #
                SSE endpoint location /sse { proxy_pass http://localhost:3000;
                proxy_http_version 1.1; proxy_set_header Connection '';
                proxy_buffering off; proxy_cache off; proxy_set_header Host
                $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header
                X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header
                X-Forwarded-Proto $scheme; } } # Enable site and restart Nginx
                sudo ln -s /etc/nginx/sites-available/market-screener
                /etc/nginx/sites-enabled/ sudo nginx -t sudo systemctl restart
                nginx
              </div>
            </div>

            <h3>🔒 SSL Certificate Setup</h3>
            <div class="highlight-box">
              <h4>Let's Encrypt SSL Certificate</h4>
              <div class="code-block">
                # Install Certbot sudo apt-get install certbot
                python3-certbot-nginx # Obtain SSL certificate sudo certbot
                --nginx -d your-domain.com # Auto-renewal setup sudo crontab -e
                # Add this line: 0 12 * * * /usr/bin/certbot renew --quiet
              </div>
            </div>

            <h3>📊 Monitoring & Logging</h3>
            <div class="feature-grid">
              <div class="feature-card">
                <h4>🔍 Application Monitoring</h4>
                <ul>
                  <li>
                    <strong>PM2 Monitoring:</strong> Process management and
                    monitoring
                  </li>
                  <li><strong>PM2 Plus:</strong> Cloud monitoring dashboard</li>
                  <li>
                    <strong>Custom Metrics:</strong> Application-specific
                    monitoring
                  </li>
                  <li>
                    <strong>Health Checks:</strong> Automated health monitoring
                  </li>
                </ul>
              </div>

              <div class="feature-card">
                <h4>📝 Logging Strategy</h4>
                <ul>
                  <li>
                    <strong>Pino Logger:</strong> High-performance JSON logging
                  </li>
                  <li>
                    <strong>Log Rotation:</strong> Automated log file management
                  </li>
                  <li>
                    <strong>Error Tracking:</strong> Sentry integration for
                    errors
                  </li>
                  <li><strong>Audit Logs:</strong> Security event logging</li>
                </ul>
              </div>

              <div class="feature-card">
                <h4>🚨 Alerting</h4>
                <ul>
                  <li>
                    <strong>System Alerts:</strong> Server health monitoring
                  </li>
                  <li>
                    <strong>Application Alerts:</strong> Error rate monitoring
                  </li>
                  <li>
                    <strong>Performance Alerts:</strong> Response time
                    monitoring
                  </li>
                  <li>
                    <strong>Business Alerts:</strong> Trading activity
                    monitoring
                  </li>
                </ul>
              </div>
            </div>

            <h3>🔄 Backup Strategy</h3>
            <div class="schema-box">
              <h4>Database Backups</h4>
              <div class="code-block">
                # MongoDB backup script #!/bin/bash BACKUP_DIR="/backup/mongodb"
                DATE=$(date +%Y%m%d_%H%M%S) mongodump
                --uri="mongodb://localhost:27017/screener"
                --out="$BACKUP_DIR/$DATE" # Redis backup (automatic) # Redis
                automatically saves to /var/lib/redis/dump.rdb # Automated
                backup script cat > /usr/local/bin/backup.sh << 'EOF'
                #!/bin/bash BACKUP_DIR="/backup" DATE=$(date +%Y%m%d_%H%M%S) #
                MongoDB backup mongodump
                --uri="mongodb://localhost:27017/screener"
                --out="$BACKUP_DIR/mongodb/$DATE" # Redis backup cp
                /var/lib/redis/dump.rdb "$BACKUP_DIR/redis/redis_$DATE.rdb" #
                Compress backups tar -czf "$BACKUP_DIR/backup_$DATE.tar.gz" -C
                "$BACKUP_DIR" mongodb/$DATE redis/redis_$DATE.rdb # Clean old
                backups (keep 7 days) find "$BACKUP_DIR" -name "backup_*.tar.gz"
                -mtime +7 -delete EOF chmod +x /usr/local/bin/backup.sh # Add to
                crontab (daily at 2 AM) echo "0 2 * * *
                /usr/local/bin/backup.sh" | crontab -
              </div>
            </div>

            <h3>📈 Performance Optimization</h3>
            <div class="api-endpoint">
              <h4>Production Optimizations</h4>
              <ul class="step-list">
                <li>
                  <strong>Database Indexing:</strong> Create optimized indexes
                  for MongoDB collections
                </li>
                <li>
                  <strong>Redis Caching:</strong> Implement aggressive caching
                  for frequently accessed data
                </li>
                <li>
                  <strong>CDN Integration:</strong> Use Cloudflare or similar
                  for static asset delivery
                </li>
                <li>
                  <strong>Load Balancing:</strong> Implement horizontal scaling
                  with multiple instances
                </li>
                <li>
                  <strong>Compression:</strong> Enable gzip compression for API
                  responses
                </li>
                <li>
                  <strong>Connection Pooling:</strong> Optimize database
                  connection management
                </li>
              </ul>
            </div>

            <div class="highlight-box">
              <h4>🎯 Deployment Checklist</h4>
              <ul>
                <li>✅ All environment variables configured</li>
                <li>✅ Database connections tested</li>
                <li>✅ SSL certificate installed</li>
                <li>✅ PM2 process management configured</li>
                <li>✅ Nginx reverse proxy configured</li>
                <li>✅ Backup strategy implemented</li>
                <li>✅ Monitoring and logging setup</li>
                <li>✅ Security measures implemented</li>
                <li>✅ Performance optimizations applied</li>
                <li>✅ Error handling and recovery tested</li>
              </ul>
            </div>

            <h3>🔧 Troubleshooting</h3>
            <div class="schema-box">
              <h4>Common Issues and Solutions</h4>
              <table class="tech-table">
                <thead>
                  <tr>
                    <th>Issue</th>
                    <th>Solution</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><strong>Port already in use</strong></td>
                    <td>
                      Check for existing processes: <code>lsof -i :3000</code>
                    </td>
                  </tr>
                  <tr>
                    <td><strong>MongoDB connection failed</strong></td>
                    <td>
                      Verify MongoDB service:
                      <code>sudo systemctl status mongod</code>
                    </td>
                  </tr>
                  <tr>
                    <td><strong>Redis connection failed</strong></td>
                    <td>
                      Check Redis service:
                      <code>sudo systemctl status redis</code>
                    </td>
                  </tr>
                  <tr>
                    <td><strong>API key errors</strong></td>
                    <td>Verify environment variables and API key validity</td>
                  </tr>
                  <tr>
                    <td><strong>SSL certificate issues</strong></td>
                    <td>
                      Check certificate validity:
                      <code>openssl x509 -in cert.crt -text</code>
                    </td>
                  </tr>
                  <tr>
                    <td><strong>PM2 process crashes</strong></td>
                    <td>
                      Check logs: <code>pm2 logs</code> and restart:
                      <code>pm2 restart all</code>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Initialize Mermaid diagrams
      mermaid.initialize({ startOnLoad: true });

      // Add active class to current page in navigation
      document.addEventListener("DOMContentLoaded", function () {
        const currentPage =
          window.location.pathname.split("/").pop() || "index.html";
        const navLinks = document.querySelectorAll(".toc-main");

        navLinks.forEach((link) => {
          if (link.getAttribute("href") === currentPage) {
            link.classList.add("active");
          }
        });
      });
    </script>
  </body>
</html>
